!function(e){"use strict";e.lrSmartlinkAnalyticsInit=function(t){const a=t||{};if(e.lrSmartlinkAnalyticsBound)return void(e.lrAnalyticsInit&&e.lrAnalyticsInit(a));e.lrSmartlinkAnalyticsBound=!0,e.lrAnalyticsInit&&e.lrAnalyticsInit(a);const n=e.lrChartColors||["#0d78f2","#10b981","#ef4444","#f59e0b","#8b5cf6","#06b6d4","#ec4899","#84cc16","#f97316","#6366f1","#14b8a6","#f43f5e"],r=a.strings||{},o=e.Craft&&Craft.getActionUrl&&a.dataEndpoint?Craft.getActionUrl(a.dataEndpoint):a.dataEndpoint;function l(e){if(!e)return;e.style.display="";const t=e.parentElement||e.parentNode;t&&t.querySelectorAll(".zilch").forEach(e=>e.remove())}function s(t,a,n){const r=document.getElementById(t);if(!r)return;l(r),function(t,a){const n=t.replace(/-/g,"_");e.lrChartInstances&&e.lrChartInstances[a]&&e.lrChartInstances[a][n]&&(e.lrChartInstances[a][n].destroy(),delete e.lrChartInstances[a][n])}(t,n),r.style.display="none";const o=r.parentElement||r.parentNode;if(!o)return;const s=document.createElement("div");s.className="zilch",s.style.padding="48px 24px",s.style.textAlign="center";const c=document.createElement("p");c.textContent=a,s.appendChild(c),o.appendChild(s)}function c(e){const t=document.getElementById("peak-hour-info");t&&(t.textContent=e||"")}function i(e,t,n,r){if(!o)return void(r&&r());const l=Object.assign({type:e},t||{});if(a.csrfName&&a.csrfToken&&(l[a.csrfName]=a.csrfToken),"undefined"!=typeof $&&$.ajax)return void $.ajax({url:o,type:"POST",dataType:"json",data:l,success:function(e){e&&e.success?n(e.data||{}):r&&r()},error:function(){r&&r()}});const s=new FormData;Object.keys(l).forEach(function(e){s.append(e,l[e])}),fetch(o,{method:"POST",body:s}).then(function(e){return e.json()}).then(function(e){e&&e.success?n(e.data||{}):r&&r()}).catch(function(){r&&r()})}document.addEventListener("lr:analyticsInit",function(t){const o=t.detail&&t.detail.config?t.detail.config:e.lrAnalyticsConfig||{},d=o.prefix||"analytics";!function(t,a,o){const d={dateRange:t,siteId:a};i("clicks",d,function(t){const a=Array.isArray(t.values)&&t.values.some(e=>Number(e)>0);t.labels&&t.labels.length>0&&a?function(t){const a=document.getElementById("clicks-chart");if(!a)return;l(a),e.lrCreateChart("clicks-chart","line",{labels:t.labels,datasets:[{label:r.clicksLabel||"Clicks",data:t.values,borderColor:n[0],backgroundColor:n[0]+"20",tension:.1,fill:!0}]},{scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0}}},plugins:{legend:{display:!1}}})}(t):s("clicks-chart",r.noInteraction||"No interaction data available.",o)},function(){s("clicks-chart",r.noInteraction||"No interaction data available.",o)}),i("device-types",d,function(t){const a=Array.isArray(t.values)&&t.values.some(e=>Number(e)>0);t.labels&&t.labels.length>0&&a?function(t){const a=document.getElementById("device-chart");if(!a)return;l(a),e.lrCreateChart("device-chart","doughnut",{labels:t.labels,datasets:[{data:t.values,backgroundColor:n.slice(0,6)}]},{plugins:{legend:{position:"bottom"}}})}(t):s("device-chart",r.noDevice||"No device data available.",o)},function(){s("device-chart",r.noDevice||"No device data available.",o)}),i("device-brands",d,function(t){const a=Array.isArray(t.values)&&t.values.some(e=>Number(e)>0);t.labels&&t.labels.length>0&&a?function(t){const a=document.getElementById("brand-chart");if(!a)return;l(a),e.lrCreateChart("brand-chart","bar",{labels:t.labels,datasets:[{label:r.clicksLabel||"Clicks",data:t.values,backgroundColor:n[0],borderColor:n[0],borderWidth:1}]},{scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0}}},plugins:{legend:{display:!1}}})}(t):s("brand-chart",r.noBrand||"No device brand data available.",o)},function(){s("brand-chart",r.noBrand||"No device brand data available.",o)}),i("os-breakdown",d,function(t){const a=Array.isArray(t.values)&&t.values.some(e=>Number(e)>0);t.labels&&t.labels.length>0&&a?function(t){const a=document.getElementById("os-chart");if(!a)return;l(a),e.lrCreateChart("os-chart","doughnut",{labels:t.labels,datasets:[{data:t.values,backgroundColor:n}]},{plugins:{legend:{position:"bottom"}}})}(t):s("os-chart",r.noOs||"No OS data available.",o)},function(){s("os-chart",r.noOs||"No OS data available.",o)}),i("browsers",d,function(t){const a=Array.isArray(t.values)&&t.values.some(e=>Number(e)>0);t.labels&&t.labels.length>0&&a?function(t){const a=document.getElementById("browser-chart");if(!a)return;l(a),e.lrCreateChart("browser-chart","doughnut",{labels:t.labels,datasets:[{data:t.values,backgroundColor:n}]},{plugins:{legend:{position:"bottom"}}})}(t):s("browser-chart",r.noBrowser||"No browser data available.",o)},function(){s("browser-chart",r.noBrowser||"No browser data available.",o)}),i("hourly",d,function(t){const a=Array.isArray(t.data)&&t.data.some(e=>Number(e)>0);t.data&&t.data.length>0&&a?function(t){const a=document.getElementById("hourly-chart");if(!a)return;l(a),e.lrCreateChart("hourly-chart","bar",{labels:Array.from({length:24},(e,t)=>t+":00"),datasets:[{label:r.clicksLabel||"Clicks",data:t.data,backgroundColor:n[0],borderColor:n[0],borderWidth:1}]},{scales:{y:{beginAtZero:!0,ticks:{stepSize:1,precision:0}}},plugins:{legend:{display:!1}}}),t.peakHourFormatted?c((r.peakUsageAt||"Peak usage at")+" <strong>"+t.peakHourFormatted+"</strong>"):c("")}(t):(s("hourly-chart",r.noHourly||"No hourly data available.",o),c(""))},function(){s("hourly-chart",r.noHourly||"No hourly data available.",o),c("")})}(o.dateRange||a.dateRange||"last7days",o.siteId||a.siteId||"",d)})}}(window);